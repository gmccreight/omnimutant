#!/usr/bin/env ruby

begin
  require 'omnimutant'
rescue LoadError
  require 'rubygems'
  require 'omnimutant'
end

require 'optparse'
require 'ostruct'

$options = OpenStruct.new
$options.verbose = false

optparse = OptionParser.new do |opts|
  opts.on('-h', '--help', 'Display this screen') do
    puts opts
    exit
  end
  opts.on('-v', 'be verbose') do
    $options.verbose = true
  end
  opts.on("-p N", Integer, "run against a specific project id") do |n|
    $options.project_id = n
  end
end

optparse.parse!

runner = Omnimutant::TestRunner.new()
runner.start_test(timeout:2)
runner.report()
